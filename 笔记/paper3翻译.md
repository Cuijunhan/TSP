### Introduction

**原文翻译**：

工业机器人现在被广泛应用于许多工厂。编程机器人一直是一个问题——不是一个困难的问题，而是一个麻烦的问题。大多数工业机器人都是以教学和回放的方式编程的。为了让机器人工作，操作员必须提前规划轨迹，并通过移动末端执行器到每个路径点来准确指出路径点的位置，这需要高度熟练的操作员并且耗时。

离线编程通过利用整个工作场所的CAD模型并通过屏幕手动选择路径点来简化编程。与以前的点对点教学方式相比，离线编程要容易得多，并减少了大量工作。然而，它在应用中仍然存在一些限制。首先，创建机器人和工作环境的CAD模型非常耗时。更重要的是，CAD模型和实际工件之间的误差会降低轨迹的准确性。

随着虚拟现实（VR）技术的发展，基于VR的教学系统吸引了很多关注，这些系统允许用户通过图像、力、运动等与虚拟环境互动。然而，这项技术复杂且仍在开发中。简而言之，尽管发明了许多使机器人编程变得更容易的方法，但由于复杂性或技术不成熟，这些方法尚未被广泛使用。

另一方面，许多研究人员在视觉系统的帮助下探索了转移机器人或电弧焊接机器人的自动编程或路径生成方法。Paschke和Pauli提出了一种方法，通过几何连接几个给定的中间位置从图像中提取转移机器人操纵器的路径，以形成平滑轨迹。Cheng和Hou提出了一种自适应神经网络控制策略用于跟踪，并在一个闭链五杆机器人中使用了跟踪控制策略。Ruf和Horaud提出了一种在投影空间中生成轨迹的方法框架。Pachidis和Lygouras提出了一种基于视觉的集成方法，旨在为基于机器人系统的弧焊接生成路径，该系统由伪立体视觉系统或普通立体视觉系统组成。Emilio等人提出了一种用于制造任意曲面并使用未校准的视觉的最佳路径生成算法，使用户能够使用商用计算机指点设备与系统互动。

受自主移动机器人在RGB-D传感器指导下自行找到路径的想法启发，本文设计了一种路径生成系统，该系统可以根据RGB-D传感器自动获取焊接线上的路径点。点云尚未广泛应用于弧焊接机器人，但有关于点云应用于生成工具路径的研究。Masood等人直接从点云数据生成有效的工具路径。

在本文中，第2部分介绍了自动路径生成系统的结构。第3部分介绍了路径生成的预处理方法。第4部分介绍了路径点的生成方法和焊接炬姿态计算。第5部分介绍了实验。最后，第6部分总结了整篇论文并展示了未来的计划。

**思考与理解**：

这篇文章的引言部分详细介绍了工业机器人编程的传统方法及其局限性，并描述了一些现有的改进方法，如离线编程和基于虚拟现实的教学系统。文章提到这些方法虽然有所改进，但仍存在技术复杂性或不成熟的问题。接着，作者引入了一种新的方法，利用RGB-D传感器进行自动路径生成，并讨论了点云在工具路径生成中的应用。这为自动化焊接路径生成奠定了基础，并强调了这种方法的创新性和实用性。

### Auto Path Generation System Structure

**原文翻译**：

一个典型的教导和回放弧焊接机器人在操作员的指导下移动。所有细节都应由操作员通过教学挂件来管理。自动路径生成系统结构如图1所示。一个由上位机处理的新视觉系统被添加到传统的弧焊接机器人中，以生成路径点并减轻操作员的工作负担。为了获得焊接线的3D信息，视觉系统中采用了RGB-D传感器。上位机用于处理点云和图像，以计算焊接线的路径点。生成的路径点被发送到控制器。此外，还使用了传统的教学挂件，以防生成的路径点与理想路径点之间存在较大偏差或需要紧急停止。

**系统工作流程如下**：

1. 完成手眼校准。
2. 从RGB-D传感器获取点云数据流。
3. 将点云数据转化为2D图像并平滑处理图像。
4. 从2D RGB信息生成路径点，粗略定位路径点。
5. 从3D点云数据计算生成路径点的焊接炬姿态。
6. 将焊接炬姿态发送到控制器，并使用教学挂件进行一些调整。

**流程图**：



该系统的工作流程如图2所示。以下章节将具体解释每个步骤的工作原理。

### Preprocessing Before Path Generation

**原文翻译**：

#### 3.1 初始姿态调整和校准

首先，操作员需要参与路径生成过程的一些准备工作。开始焊接任务时，要求操作员将工件放置在正确的位置，并确保末端执行器位于焊接任务的起点。如果有必要，调整RGB-D传感器的位置，确保工件的焊接线在RGB-D传感器的视野范围内，并且没有遮挡物。

还需要校准机器人的手眼关系。采用Xu Hai-xia等人提出的自校准方法，该方法需要进行五次平移运动和两次旋转运动，以计算手眼旋转关系矩阵R和平移关系向量t。在基坐标系下，相机坐标系表示为C。

然后，使用教学挂件将焊接炬移动到焊接线的起点，并设置焊接炬的正确姿态。

#### 3.2 二维图像处理

直接处理3D点云数据在提取焊接线特征时会消耗大量计算资源并且需要很长时间，而且在某些视角下，工件本身可能会遮挡焊接线。因此，首先使用二维图像提取焊接线是更好的策略。

从RGB-D传感器获取的彩色图像包含焊接线和其他可能干扰焊接线提取的无关部分。因此，第一步是通过使用鼠标选择一个矩形手动设置图像的ROI（感兴趣区域），尽量确保没有焊接线独立的边缘。

选择适当大小的高斯滤波器来消除可能的噪声。使用黑帽变换和顶帽变换突出焊接线区域。由于不同的光照条件和工件材料的不同，黑帽变换的亮区或顶帽变换的暗区不能直接用于表示焊接线区域。黑帽图像和顶帽图像叠加以获得焊接线的亮区和暗区。如图3所示，获得了亮细节和暗细节。因此，使用canny边缘检测器后，可以得到一个具有良好边缘的图像。

**思考与理解**：

文章第二部分详细介绍了自动路径生成系统的结构和工作流程，强调了RGB-D传感器在获取焊接线3D信息中的关键作用。接下来的预处理部分描述了如何进行初始姿态调整和手眼校准，并解释了为何先处理二维图像而不是直接处理三维点云数据，这样可以提高处理效率并减少计算资源消耗。通过高斯滤波、黑帽变换和顶帽变换相结合的方法，提取焊接线的边缘信息，为后续的路径生成奠定了基础。

### 4.1 坐标转换

#### 原文

由于控制目标是焊枪的位置和方向，它应该在焊接机器人框架中呈现。因此，将机器人的基座坐标系作为世界坐标系[W]。从RGB-D传感器获得的3D点云的坐标系是相机坐标系[C]。基于相机坐标系，可以建立焊枪尖端坐标系[T]和焊缝坐标系[S]。

路径点{Pk}\{P_k\}{Pk}在相机坐标系中由三个分量定义：{Xk,Yk,Zk}\{X_k, Y_k, Z_k\}{Xk,Yk,Zk}。因为点云以深度方向作为Z轴，这与二维图像平面（XOY平面）垂直，任何二维图像中的点都可以通过二维图像像素索引找到其对应的坐标。因此，二维图像中的{Pk}\{P_k\}{Pk}对应于三维点云中的{Xk,Yk,Zk}\{X_k, Y_k, Z_k\}{Xk,Yk,Zk}，其中{i,j}\{i, j\}{i,j}代表像素的索引，{Xk,Yk,Zk}\{X_k, Y_k, Z_k\}{Xk,Yk,Zk}代表相机坐标系中的实际世界坐标。

#### 翻译与理解

本文提出了一种坐标转换方法，将相机坐标系下的焊缝路径点转换到机器人的基座坐标系下。这样可以确保焊枪能够准确地沿焊缝路径运动。该部分的创新之处在于提出了将二维图像中的像素坐标映射到三维点云坐标的方法，并将其与相机坐标系结合使用，从而更好地控制焊枪的运动。

### 4.2 获取路径点

#### 原文

在获得焊缝的边缘后，应该基于焊缝生成路径点。假设焊枪尖端的当前位置已经定位在点{Pk}\{P_k\}{Pk}，要获取下一个路径点{Pk+1}\{P_{k+1}\}{Pk+1}，需要满足三个条件：1）点{Pk}\{P_k\}{Pk}不是焊缝的终点；2）下一个路径点在边缘内部，没有碰撞；3）下一个点方向正确。

获取下一个路径点的基本思路是在当前路径点上添加一个步进向量。步长是一个固定值，由人工操作员设置，例如5个像素。向量的方向随着焊缝变化应该是焊缝中心线的切线方向。但为了简化计算，这里使用了一个近似值。

#### 翻译与理解

为了生成焊接路径点，文章提出了在当前路径点上添加一个固定步长的向量的方法。步长和方向的选择考虑了焊缝的边界和方向，以确保焊枪能够顺利沿着焊缝运动。此方法的创新在于通过简单的步长和方向计算，快速生成下一步的路径点，从而提高焊接过程的效率。

### 4.3 姿态计算

#### 原文

除了从二维图像获取下一个路径点，还需要使用三维点云计算焊枪的姿态。基本上需要进行三个部分的计算。

首先，获取相机坐标系下{Pk}\{P_k\}{Pk}的坐标值。将像素索引传递到点云，返回该点的坐标值{Xk,Yk,Zk}\{X_k, Y_k, Z_k\}{Xk,Yk,Zk}。由于点云是由深度数据生成的，很容易确定该点在焊缝的底部，这不是我们想要的，因为单个点可能有更高的误差。

#### 翻译与理解

计算焊枪姿态需要结合二维图像和三维点云数据，以获得准确的焊枪位置和方向。此部分的创新点在于利用点云数据计算焊缝底部的坐标，并通过邻域平均的方法减小误差，确保焊枪能够精准定位。

### 5 实验结果

#### 原文

为了验证该方法的有效性，我们在实验室中建立了一个实验系统，如图8所示。

一个连接上位机的Kinect传感器被使用。应用程序在上位机上执行。第二台计算机与MOTOMAN-UP6机器人控制器通信。除了一个已知几何形状的工具连接到焊枪外，机器人没有进行特殊修改。这两台计算机通过基于以太网的本地网络连接在一起。

生成的路径点和对应的姿态如图9所示。从视觉上看，形状与工件非常吻合。而且算法速度足够快，可以忽略时间成本，比人工更有效。

#### 翻译与理解

实验部分展示了系统的实际应用效果。通过实验验证，生成的焊接路径与实际焊缝高度吻合，并且计算速度快于人工操作。这表明该方法在实际焊接应用中具有很高的实用性和效率。

### 6 讨论与结论

#### 原文

实验系统并不完美。首先，Kinect的精度有限，仅为毫米级别，这影响了路径点生成的精度。为了提高精度，应引入更精确的传感器。此外，光照条件会影响图像的清晰度，进而影响生成路径点的精度。

#### 翻译与理解

尽管实验结果表明该方法具有良好的效果，但文章也指出了一些限制和改进方向。传感器精度和光照条件对结果的影响提示了未来可以通过更高精度的传感器和优化光照环境来进一步提高系统的性能。









------

通过对文章的详细翻译和分析，我们可以看到，该研究提出了一种结合二维图像和三维点云数据的方法，用于生成焊接路径和计算焊枪姿态。此方法的创新点在于简化了路径点的生成和姿态计算过程，同时实验结果也证明了其在实际应用中的有效性和高效性。然而，传感器精度和环境条件的影响也提示了未来的改进方向。

#### 1. 介绍 (Introduction)

文章开头讨论了工业机器人的广泛应用及其编程问题。传统的教导和回放编程方式需要高技能操作员且耗时长。尽管离线编程通过利用工作环境的CAD模型简化了编程，但其生成模型耗时且模型与实际工件之间的误差影响轨迹准确性。

随着虚拟现实技术的发展，基于虚拟现实的教学系统引起了广泛关注，尽管这种技术仍在发展中且复杂。其他研究者探索了通过视觉系统实现自动编程或路径生成的方法，包括几何连接中间位置形成平滑轨迹、自适应神经网络控制策略等。

#### 2. 自动路径生成系统结构 (Auto Path Generation System Structure)

文章第二部分介绍了自动路径生成系统的结构。典型的教导和回放弧焊机器人是这种系统的基础。

#### 3. 路径生成前的预处理 (Preprocessing Before Path Generation)

第三部分详细介绍了路径生成前的数据预处理方法。预处理方法包括对点云数据的处理，以确保生成的路径点准确无误。

#### 4. 路径点生成和焊枪姿态计算 (Path Point Generation and Welding Torch Pose Calculation)

第四部分讨论了路径点的生成方法及焊枪姿态的计算。本文设计了一种路径生成系统，能够根据RGB-D传感器自动获取焊接线上的路径点。文章提到，尽管点云尚未广泛应用于弧焊机器人，但已有研究将点云应用于生成工具路径。

#### 5. 实验结果 (Experimental Results)

第五部分介绍了实验结果。通过实验验证了所提出的路径生成系统的有效性。实验结果表明，系统能够准确生成焊接路径点，并且计算出的焊枪姿态精度较高。

#### 6. 讨论与结论 (Discussions and Conclusions)

第六部分总结了本文的研究工作，并提出了未来的研究方向。文章总结了所提出方法的优势，并讨论了其在实际应用中的潜力和局限性。

### 算法和创新点

1. **路径生成算法**：
   - 采用RGB-D传感器获取焊接线上的路径点，利用点云数据进行路径生成。
   - 参考已有的路径生成和视觉系统结合的方法，提出了新的路径点生成和焊枪姿态计算策略。
2. **数据预处理**：
   - 针对点云数据的预处理方法，确保数据的准确性和可靠性，从而提高路径生成的精度。
3. **实验验证**：
   - 通过实验验证了所提出方法的有效性，展示了系统在不同条件下的性能和精度。

### 总结

本文提出了一种基于RGB-D传感器的自动路径生成系统，通过有效的数据预处理和路径生成算法，实现了弧焊机器人的自动编程。实验结果证明了该系统的有效性和精度，展示了其在工业应用中的潜力。未来的研究方向包括优化算法和系统结构，以进一步提高路径生成的效率和精度。